<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- CSS dependencies -->
    <link rel="stylesheet" href="../../css/bootstrap/dist/css/bootstrap.css"/>
    <link rel="stylesheet" href="../../css/jquery-ui/ui-lightness/jquery-ui.css"/>

    <!-- Colorpicker/Hotnumber CSS -->
    <link rel="stylesheet" href="../../css/ui/colorpicker.css"/>
    <link rel="stylesheet" href="../../css/ui/hotnumber.css"/>

    <!-- Core CSS -->
    <link rel="stylesheet" href="../../css/ui/style.css"/>

    <!-- Flash block CSS (for Soundmanager) -->
    <link rel="stylesheet" href="../../css/ui/flashblock.css"/>

</head>
<body>
    <div id="sample-live-editor"></a>


    <!-- TODO: Compress everything into one JS file that demos can reference -->
    <!-- Core dependencies -->
    <script src="../../external/es5-shim/es5-shim.js"></script>
    <script src="../../external/jquery/dist/jquery.js"></script>
    <script src="../../external/jqueryui/jquery-ui.js"></script>
    <script src="../../external/handlebars/handlebars.js"></script>
    <script src="../../external/underscore/underscore.js"></script>
    <script src="../../external/backbone/backbone.js"></script>

    <!-- Code editor -->
    <script src="../../external/ace-builds/src-noconflict/ace.js"></script>
    <script src="../../external/ace-builds/src-noconflict/mode-javascript.js"></script>
    <script src="../../external/ace-builds/src-noconflict/ext-searchbox.js"></script>
    <script src="../../external/colorpicker/colorpicker.js"></script>

    <!-- Internal jQuery plugins -->
    <script src="../../js/ui/jquery.button.js"></script>
    <script src="../../js/ui/hotnumber.js"></script>

    <!-- Templates -->
    <script src="../../tmpl/live-editor.handlebars.js"></script>
    <script src="../../tmpl/imagepicker.handlebars.js"></script>

    <!-- Shared logic -->
    <script src="../../js/shared/i18n.js"></script>
    <script src="../../js/shared/images.js"></script>
    <script src="../../js/shared/record.js"></script>
    <script src="../../js/shared/config.js"></script>

    <!-- Core logic -->
    <script src="../../js/ui/canvas.js"></script>
    <script src="../../js/ui/editor.js"></script>
    <script src="../../js/ui/record.js"></script>
    <script src="../../js/live-editor.js"></script>

    <!-- The actual slides -->
    <script src="slides.js"></script>
    <script>
(function() {

var options = {
    el: $("#sample-live-editor"),
    code: window.localStorage["test-code"] || "",
    width: 400,
    height: 400,
    editorHeight: "400px",
    autoFocus: true,
    execDir: "../../js/exec/",
    execFile: "../../exec.html",
    externalsDir: "../../external/",
    imagesDir: "../../images/"
};

window.liveEditor = new LiveEditor(options);


var slideNum = 0;

var stringifyTestCode = function(codeStrOrFunc) {
    if (!_.isString(codeStrOrFunc)) {
        codeStrOrFunc = codeStrOrFunc.toString()
            .replace(/^function\s\(\)\s\{/gi, "")
            .replace(/\}$/gi, "");
    }

    return codeStrOrFunc;
};

var displaySlide = function(slideNum) {
    if (slideNum < slides.length) {
        liveEditor.editor.reset(stringifyTestCode(slides[slideNum]));
    }
};

var nextButton = $('<button>Next →</button>')
    .css('float', 'right')
    .on('click', function() {
        slideNum++;
        displaySlide(slideNum);
    })
    .appendTo('.scratchpad-editor-wrap .scratchpad-toolbar');

var prevButton = $('<button>Prev ←</button>')
    .on('click', function() {
        slideNum--;
        displaySlide(slideNum);
    })
    .appendTo('.scratchpad-editor-wrap .scratchpad-toolbar');


displaySlide(slideNum);

})();
    </script>


</body>
</html>