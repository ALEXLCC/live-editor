{"scratchpad": {"guidelinesUrlPath": "/computer-programming/guidelines/pjs", "contentKindCode": "p", "newUrlPath": "/computer-programming/new/pjs", "hideFromHotlist": false, "relativeUrl": "/computer-programming/colored-quaternion-fractal/5179043068641280", "originScratchpadId": 6223097608929280, "projectEval": null, "slug": "colored-quaternion-fractal", "canvasOnly": false, "originSimilarity": 0.43839634941329858, "id": 5179043068641280, "definitelyNotSpam": false, "editSlug": "edit/p/colored-quaternion-fractal", "category": null, "originRevisionId": 5741031244955648, "title": "Colored Quaternion Fractal", "translatedProjectEval": null, "sendToPeers": false, "nodeSlug": "p/colored-quaternion-fractal", "isChallenge": false, "spinoffCount": 45, "descriptionHtml": "", "youtubeId": null, "docsUrlPath": "/computer-programming/docs/pjs", "contentKind": "Scratchpad", "type": "scratchpad", "revision": {"tests": "", "code": "/** CLICK TO PAUSE **/\n\n/*\nCURRENT PROGRESS:\nAdded Colors\nAdded Lights\nAdded Spiral render pattern\n*/\n\n/** INFO:\n * \n * Lives in: Country: US, State: MA\n * Grade: 9th (homeschooled)\n * \n * What do I love about programming?\n * \n * - I like to not let computers control me, but to control computers myself -\n * \n **/\n\n/**\n * This program generates what is called a quaternion julia set.\n * I realize that it takes ages to load (almost a full minute), but is actually the fastest \n * quaternion fractal renderer on KA! (well, second to a different one that I also made)\n * \n * Anyway, a quaternion julia is a 4D Fractal.\n * It can be displayed as a 3D cross-section, as it is here.\n * Here it is colored based on the number of iterations before |z| exceeds the escape radius \n * the image is partially anti aliased by this procedure.\n * \n **/\n \n \n//JULIA CONSTANTS:\nvar CR = -0.55;\nvar CI = -0.3;\nvar CJ = -0.35;\nvar CK = 0.5;\n\n//Position in fourth dimension\nvar P4D = 0;\nvar DZC = 8;\nvar MCC = 384;\nvar PPF = 64;\n\nbackground(0);\n(function(){\n\nvar px=0,py=0,pdx=0,pdy=-1;\nvar drawNum=0;\nvar paused = false;\n\ndraw = function() {\n    if (paused){return;}\n    if (drawNum > 1){return;}\n    if (!this.loadPixels){return;}\n    \n    var sqr = Math.sqrt;\n    \n    var p,l,w,h,w2,h2,rw2,rh2,x,y,n=PPF;//pixels\n    var cx,cy,cz,cc,mcc=MCC,rmcc=1/mcc,dz;//caster\n    var zr,zrt2,zi,zj,zk,cr=CR,ci=CI,cj=CJ,ck=CK,p4d=P4D,ji,mji=14;//quat\n    var zr2,zijk2;\n    \n    //partial anti-alias sample positional derivation from final caster iteration (colors)\n    var sm = 0.02;\n    var tv = [[sm,sm,sm], [sm,-sm,-sm], [-sm,sm,-sm], [-sm,-sm,sm]],cv;\n    var hc,thc=tv.length-1,hx,hy,hz,hm;\n    \n    //Surrounding Light\n    var lv;\n    \n    var rmji=1/mji;\n    \n    dz = DZC*rmji*rmcc;\n    \n    w=width; h=height;\n    w2=w>>1; h2=h>>1;\n    rw2=2/w; rh2=2/h;\n    \n    //Spiral\n    var spt,sx=px,sy=py,dx=pdx,dy=pdy;\n    \n    this.loadPixels();\n    p=this.imageData.data;\n    \n    do {\n        x=sx+w2;\n        y=sy+h2;\n        \n        lv=0;\n        cx=x*rw2-1; cy=y*rh2-1; cz=-1.5;\n        \n        cc=mcc; do {\n            zr=cx; zi=cy; zj=cz; zk=p4d;\n            zr2=zr*zr;\n            zijk2=zi*zi+zj*zj+zk*zk;\n            \n            ji=mji; do {\n                zrt2=zr+zr;\n                \n                zr=zr2-zijk2+cr;\n                zi=zrt2*zi+ci;\n                zj=zrt2*zj+cj;\n                zk=zrt2*zk+ck;\n                \n                zr2=zr*zr;\n                zijk2=zi*zi+zj*zj+zk*zk;\n                \n            } while ((--ji>0)&&(zr2+zijk2<4.0));\n            \n            cz+=dz*ji;\n            \n            lv += ji;\n            \n        } while ((--cc>0)&&(ji>0));\n        \n        l=x+y*w<<2;\n        \n        p[l] = p[l+1] = p[l+2] = 0;\n        \n        if (cc>0){\n            hx=0;\n            hy=0;\n            hz=0;\n            hc=thc; do {\n                cv = tv[hc];\n                \n                zr=cx+cv[0]; zi=cy+cv[1]; zj=cz+cv[2]; zk=p4d;\n                \n                zr2=zr*zr;\n                zijk2=zi*zi+zj*zj+zk*zk;\n                \n                ji=mji; do {\n                    zrt2=zr+zr;\n                    \n                    zr=zr2-zijk2+cr;\n                    zi=zrt2*zi+ci;\n                    zj=zrt2*zj+cj;\n                    zk=zrt2*zk+ck;\n                    \n                    zr2=zr*zr;\n                    zijk2=zi*zi+zj*zj+zk*zk;\n                    \n                } while ((--ji>0)&&(zr2+zijk2<4.0));\n                \n                hx += cv[0]*ji;\n                hy += cv[1]*ji;\n                hz += cv[2]*ji;\n                \n            } while(--hc >= 0);\n            \n            hx*=rmji;\n            hy*=rmji;\n            hz*=rmji;\n            hm = 160.0/sqr(hx*hx+hy*hy+hz*hz);\n            hx=hx*hm+96;\n            hy=hy*hm+96;\n            hz=hz*hm+96;\n            \n            cz/=3; \n            cz=0.75-cz*cz-cz;\n            \n            p[l] = hx*cz;\n            p[l+1] = hy*cz;\n            p[l+2] = hz*cz;\n        }\n        \n        \n        lv = (mcc-cc) * mji - lv;\n        lv*=rmji*rmcc*256;\n        \n        p[l] += lv;\n        p[l+1] += lv;\n        p[l+2] += lv;\n        \n        \n        if (sx === sy || (sx < 0 && sx === -sy) || (sx > 0 && sx === 1-sy)){\n            spt=dx;\n            dx=-dy;\n            dy=spt;\n        }\n        \n        sx+=dx;\n        sy+=dy;\n    } while (--n);\n    \n    px=sx;\n    py=sy;\n    pdx=dx;\n    pdy=dy;\n    \n    if (x>w){\n        drawNum++;\n        DZC = 6;\n        MCC = 1024;\n        PPF = 16;\n        px=0;\n        py=0;\n        pdx=0;\n        pdy=-1;\n    }\n    this.updatePixels();\n};\n\nmousePressed = function(){\n    paused = !paused;\n};\n\n})();\n\n\n\n\n", "created": "2015-06-13T14:35:33Z", "folds": [], "translatedMp3Url": "", "hasAudio": false, "mp3Url": "", "editorType": "ace_pjs", "playback": "", "youtubeId": null, "configVersion": 4, "id": 5754903989321728}, "tests": "", "imagePath": "/computer-programming/colored-quaternion-fractal/5179043068641280/5754903989321728.png", "nodeType": "scratchpad", "description": "", "isProject": false, "tags": [], "translatedDescription": "", "byChild": false, "difficulty": -1, "originIsProject": false, "key": "ag5zfmtoYW4tYWNhZGVteXIXCxIKU2NyYXRjaHBhZBiAgIjz_smZCQw", "date": "2015-06-13T14:35:33Z", "height": 400, "translatedTests": "", "kind": "Scratchpad", "termMap": {"new": "New Program", "guidelines": "Program Guidelines", "restart": "Restart"}, "globalId": "p5179043068641280", "translatedDescriptionHtml": "", "created": "2015-06-11T14:40:26Z", "url": "https://www.khanacademy.org/computer-programming/colored-quaternion-fractal/5179043068641280", "imageUrl": "https://www.khanacademy.org/computer-programming/colored-quaternion-fractal/5179043068641280/5754903989321728.png", "isPublished": false, "sumVotesIncremented": 261, "defaultUrlPath": null, "flags": ["plagiarism: ", "plagiarism: ", "inappropriate: ", "using-disallowed: "], "isProjectOrFork": false, "userAuthoredContentType": "pjs", "kaid": "kaid_923591327600038001835478", "width": 400, "translatedTitle": "Colored Quaternion Fractal"}, "embedded": false, "creatorProfile": {"isSelf": false, "countVideosCompleted": 51, "isParentOfLoggedInUser": false, "isChildAccount": false, "hasChangedAvatar": true, "soundOn": false, "followRequiresApproval": true, "canModifyCoaches": true, "allowedByParentToAddAnyCoach": true, "publicBadges": [null, null, {"absoluteUrl": "https://www.khanacademy.org/badges/1000-kelvin", "isRetired": false, "safeExtendedDescription": "Have a red-hot program at the top of the Community Programs list", "isOwned": false, "description": "1000 Kelvin", "icons": {"large": "https://cdn.kastatic.org/images/badges/moon/1000-kelvin-512x512.png", "compact": "https://cdn.kastatic.org/images/badges/moon/1000-kelvin-60x60.png", "small": "https://cdn.kastatic.org/images/badges/moon/1000-kelvin-40x40.png", "email": "https://cdn.kastatic.org/images/badges/moon/1000-kelvin-70x70.png"}, "relativeUrl": "/badges/1000-kelvin", "translatedDescription": "1000 Kelvin", "badgeCategory": 1, "points": 1000, "translatedSafeExtendedDescription": "Have a red-hot program at the top of the Community Programs list", "iconSrc": "https://cdn.kastatic.org/images/badges/moon/1000-kelvin-40x40.png", "hideContext": false, "slug": "1000-kelvin", "name": "kelvinbadge"}, null], "isCurator": false, "isPhantom": false, "isCreator": false, "childPageRoot": "/parent/child/swax97/", "backgroundSrc": "https://cdn.kastatic.org/images/profile/backgrounds/bg-photon-1.jpg", "isDeveloper": false, "avatarName": "leaf_orange_style", "affiliations": [], "isModerator": false, "canEvalCsProjects": true, "globalPermissions": [], "profileRoot": "/profile/swax97/", "email": "", "isPublic": true, "username": "swax97", "bio": "Games, renders, fractals, and the like! Coding is my main hobby, but I also do karate, play the piano, and build robots with my FRC team, 2342 Team Phoenix!", "hasStudents": false, "countBrandNewNotifications": 0, "canCreateOfficialClarifications": false, "isOrphan": false, "backgroundName": "photon-1", "canHellban": false, "includesUserDataInfo": true, "background": {"translatedDisplayName": "Photon One", "imagePath": "/images/profile/backgrounds/bg-photon-1.jpg", "displayName": "Photon One", "name": "photon-1", "thumbSrc": "https://cdn.kastatic.org/images/profile/backgrounds/bg-photon-1-preview.png", "translatedRequirements": ["Earn 100,000 energy points"], "rewardType": "profile_background", "thumbnailSrc": "https://cdn.kastatic.org/images/profile/backgrounds/bg-photon-1.jpg", "imageSrc": "https://cdn.kastatic.org/images/profile/backgrounds/bg-photon-1.jpg", "thumbnailPath": "", "thumbPath": "/images/profile/backgrounds/bg-photon-1-preview.png"}, "isDataCollectible": false, "nickname": "\u25c4\u2593\u2592\u2591Swax97\u2591\u2592\u2593\u25ba", "canMessageUsers": false, "isActivityAccessible": false, "kaid": "kaid_923591327600038001835478", "restrictedDomain": null, "moderatorLevel": 0, "dateJoined": "2014-04-03T13:57:40Z", "avatarSrc": "https://cdn.kastatic.org/images/avatars/svg/leaf-orange.svg", "isCoachingLoggedInUser": false, "userLocation": {"city": "blahammaren", "lastModified": "2015-06-21T20:01:28Z", "googlePlacesId": "27b3fe3d55934044cbf16a74584ba7e5d7baff0b", "state": "Jamtland County", "displayText": "Somewhere on mars, I'm just chillin' with the rovers ;)", "country": "SE", "postalCode": "83015"}, "points": 652737, "avatar": {"translatedDisplayName": "Leaf (Orange)", "imagePath": "/images/avatars/svg/leaf-orange.svg", "displayName": "Leaf (Orange)", "name": "leaf_orange_style", "partType": "style", "forModel": "leaf", "translatedRequirements": [], "rewardType": "avatar_reward", "thumbnailSrc": "https://cdn.kastatic.org/images/avatars/svg/leaf-orange.svg", "imageSrc": "https://cdn.kastatic.org/images/avatars/svg/leaf-orange.svg", "thumbnailPath": ""}, "canRecordTutorial": false, "isPublisher": false}, "discussion": {"showProjectFeedback": true, "loggedIn": false, "isDeveloper": false, "communityQuestionsTitle": "Computer Science", "showDocumentation": true, "isVideo": false, "translatedCommunityQuestionsTitle": "Computer Science", "focusId": "5179043068641280", "isOwner": false, "showSpinoffs": true, "which": "scratchpad-questions", "focusKind": "scratchpad", "communityQuestionsUrl": "/computer-programming/d", "canEdit": false, "canRequestFeedback": false, "restrictPosting": false}, "upVoted": false, "originScratchpad": {"category": "official", "url": "https://www.khanacademy.org/computer-programming/contest-generative-art/6223097608929280", "imageUrl": "https://www.khanacademy.org/computer-programming/contest-generative-art/6223097608929280/5649050225344512.png", "sendToPeers": false, "translatedDescription": "", "projectEval": null, "id": 6223097608929280, "deleted": false, "revision": {"id": 5741031244955648}, "slug": "contest-generative-art", "translatedTitle": "Contest: Generative Art"}, "flaggedByUser": false, "downVoted": false, "userScratchpad": {"kind": "UserScratchpad", "msWatched": 0, "isProject": false, "msDuration": null, "lastMsWatched": 0, "challengeStatus": -1, "scratchpadKey": "ag5zfmtoYW4tYWNhZGVteXIXCxIKU2NyYXRjaHBhZBiAgIjz_smZCQw", "fullyWatched": false, "isComplete": false, "isChallenge": false, "difficulty": -1, "points": 0, "stashedCode": "", "key": "ag5zfmtoYW4tYWNhZGVteXKuAQsSDlVzZXJTY3JhdGNocGFkIpkBYWc1emZtdG9ZVzR0WVdOaFpHVnRlWEpVQ3hJSVZYTmxja1JoZEdFaVJuVnpaWEpmYVdSZmEyVjVYMmgwZEhBNkx5OXBaQzVyYUdGdVlXTmhaR1Z0ZVM1dmNtY3ZNamszTm1WbFpHRXpZbVExTkdReVltRTNaR0ZsWVRZNU9EUTVNemRpTVdVTTo1MTc5MDQzMDY4NjQxMjgwDA", "userKey": "ag5zfmtoYW4tYWNhZGVteXJUCxIIVXNlckRhdGEiRnVzZXJfaWRfa2V5X2h0dHA6Ly9pZC5raGFuYWNhZGVteS5vcmcvMjk3NmVlZGEzYmQ1NGQyYmE3ZGFlYTY5ODQ5MzdiMWUM", "id": "ag5zfmtoYW4tYWNhZGVteXJUCxIIVXNlckRhdGEiRnVzZXJfaWRfa2V5X2h0dHA6Ly9pZC5raGFuYWNhZGVteS5vcmcvMjk3NmVlZGEzYmQ1NGQyYmE3ZGFlYTY5ODQ5MzdiMWUM:5179043068641280", "viewed": true}}