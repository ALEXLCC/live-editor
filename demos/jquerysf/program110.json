{"scratchpad": {"guidelinesUrlPath": "/computer-programming/guidelines/pjs", "contentKindCode": "p", "newUrlPath": "/computer-programming/new/pjs", "key": "ag5zfmtoYW4tYWNhZGVteXIXCxIKU2NyYXRjaHBhZBiAgIiLmNqICQw", "spinoffCount": 4, "originScratchpadId": 6223097608929280, "projectEval": null, "height": 400, "date": "2015-06-18T21:21:20Z", "originSimilarity": 0.37817225509533203, "id": 5104832794984448, "definitelyNotSpam": false, "editSlug": "edit/p/marblize", "category": null, "originRevisionId": 5741031244955648, "title": "Marblize", "translatedProjectEval": null, "sendToPeers": false, "nodeSlug": "p/marblize", "isChallenge": false, "width": 400, "descriptionHtml": "", "youtubeId": null, "docsUrlPath": "/computer-programming/docs/pjs", "contentKind": "Scratchpad", "type": "scratchpad", "revision": {"tests": "", "code": "// About me:\n// I am a college junior software engineering\n// student near Orlando, FL.  I live (love -\n// Freudian slip) programming because it provides\n// a means of realizing my inner vision, those\n// thoughts and dreams which words cannot\n// adequately express.\n\n/************************************************\n * \n *                  Marblize\n *              By Eric Balingit\n * \n *              For Khan Academy\n *           Contest: Generative Art\n * \n * Created: 6/11/2015\n * \n * Credits:\n *  - Nlab_blue_1418 for using HSB range for color\n *    balancing.\n * \n *    https://www.khanacademy.org/profile/nlab1418/programs\n *    =====================================================\n * \n *  - Swax97 for showing us that composed noise\n *    is more interesting that simple noise.\n * \n *    https://www.khanacademy.org/profile/swax97/programs\n *    ===================================================\n * \n *  - Brian French for demonstrating the\n *    surprising capabilities of javascript in\n *    terms of raw computation - to the degree\n *    permitted by javascript.  Without his\n *    inspiring programs the most complicated\n *    algorithms and deep computations would not\n *    have been attempted.\n *    \n *    https://www.khanacademy.org/profile/mtrn/programs\n *    =================================================\n * \n ************************************************/\n// noise scale, smaller is more detail\n// marbleRate is the speed of the churning\nvar sx = 0.01, sy = 0.01, marbleRate = 0.01;\n\n// HSB is more intuitive that RGB\ncolorMode(HSB, 142, 255, 225);\n\nvar draw = function() {\n    if(!this.loadPixels){\n        return;\n    }\n    this.loadPixels();\n    \n    // writing to the pixel array is much faster than\n    // calling point() for every pixel\n    var p = this.imageData.data,\n\n        // initialize index to start from in pixel array\n        i = 0,\n        \n        // the image being rendered is a 2D slice of a 3D noise space\n        // the pos variable increments the z-position of the slice by\n        // the marbleRate (or speed)\n        pos = this.marbleRate * this.frameCount,\n        \n        // internal variables boost scope resolution performance and can\n        // dramatically improve overall speed, here we look up each\n        // function and variable exactly once per frame, if done on the\n        // inner loop as opposed to here, it would be equivalent to\n        // looking up each variable name 10,000 times per frame, there\n        // are 5 variables here, that would be 50,000 lookups per\n        // animation frame i.e. lots of wasted computation\n        noise = this.noise,\n        color = this.color,\n        sx = this.sx,\n        sy = this.sy,\n        constrain = this.constrain,\n        \n        // precalculate 3 rows of pixel offsets from the current position\n        // FIXED: the render is based on 100x100 scaled by 4 and should not\n        // be dependent on width\n        w1 = 1600, w2 = 3200, w3 = 4800;\n    \n    // render 100x100 texture and scale it by 4\n    for(var y=0; y<100; y += 1){\n        for(var x=0; x<100; x += 1, i += 16){\n            \n            // copy the pixel array position so we can increment\n            // the copy without destroying the current postion\n            var m = i,\n                \n                // calculate noise scaled position on the 2D slice\n                mx = x * sx, my = y * sy,\n                // precalculate composite for output noise\n                \n                // composing noise causes the result to chase noise around a\n                // noise generated position - this is what makes it swirly\n                // (lateral turbulence) as opposed to bumpy (verticle turbulence)\n                n = noise(mx, my, pos),\n                \n                // get the HSB color at the given coordinates in noise space\n                // *the animation seems to stop when input values get outside\n                //  of the range of the color function, this can happen because\n                //  the result of the noise function is scaled so the output is\n                //  closer to 0.0-1.0 (typical noise values range from ~0.2 to ~0.7) \n                c = color(\n                    constrain(127+127*(0.5-2*noise(5*n, 10*n, pos)), 0, 255),\n                    255,//constrain(250+50*(0.5-2*noise(5*n, 10*n, pos)), 0, 255),\n                    constrain(200+100*(0.5-2*noise(n, 50*n, pos)), 0, 255)\n                ),\n                \n                // get the color primitives from the HSB calculated value\n                r = c >> 16 & 255,\n                g = c >> 8 & 255,\n                b = c & 255;\n            \n            // ratchet out color primitives to all 16 pixels in a\n            // 4x4 block\n            \n            // one vertical row of pixels at the location of i\n            // *here we carefully reuse each variable and perform\n            //  extra computations only when necessary\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = r;\n            m += 1;\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = g;\n            m += 1;\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = b;\n            m += 2;\n            \n            // one column to the right and 4 more verticle pixels\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = r;\n            m += 1;\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = g;\n            m += 1;\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = b;\n            m += 2;\n            \n            // etc.\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = r;\n            m += 1;\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = g;\n            m += 1;\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = b;\n            m += 2;\n            \n            // etc.\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = r;\n            m += 1;\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = g;\n            m += 1;\n            p[m] = p[m+w1] = p[m+w2] = p[m+w3] = b;\n        }\n        // now i' is at the end of a row, so jump down three\n        // rows to start on the 4th row after i\n        i += w3;\n    }\n    \n    // send pixel data to the canvas\n    this.updatePixels();\n};", "created": "2015-06-18T21:21:20Z", "folds": [], "translatedMp3Url": "", "hasAudio": false, "mp3Url": "", "editorType": "ace_pjs", "playback": "", "youtubeId": null, "configVersion": 4, "id": 5747976207073280}, "tests": "", "imagePath": "/computer-programming/marblize/5104832794984448/5747976207073280.png", "nodeType": "scratchpad", "description": "", "isProject": false, "tags": [], "translatedDescription": "", "byChild": false, "difficulty": -1, "originIsProject": false, "termMap": {"new": "New Program", "guidelines": "Program Guidelines", "restart": "Restart"}, "hideFromHotlist": false, "canvasOnly": false, "slug": "marblize", "kind": "Scratchpad", "translatedTests": "", "globalId": "p5104832794984448", "translatedDescriptionHtml": "", "created": "2015-06-12T03:08:30Z", "url": "https://www.khanacademy.org/computer-programming/marblize/5104832794984448", "imageUrl": "https://www.khanacademy.org/computer-programming/marblize/5104832794984448/5747976207073280.png", "isPublished": false, "sumVotesIncremented": 8, "defaultUrlPath": null, "flags": [], "relativeUrl": "/computer-programming/marblize/5104832794984448", "isProjectOrFork": false, "userAuthoredContentType": "pjs", "kaid": "kaid_1034496681270447732882321", "translatedTitle": "Marblize"}, "embedded": false, "creatorProfile": {"isSelf": false, "username": "embalingit", "isParentOfLoggedInUser": false, "isPhantom": false, "hasChangedAvatar": true, "soundOn": false, "followRequiresApproval": true, "canModifyCoaches": true, "dateJoined": "2013-03-18T16:22:41Z", "isCurator": false, "isChildAccount": false, "isCreator": false, "childPageRoot": "/parent/child/embalingit/", "backgroundSrc": "https://cdn.kastatic.org/images/profile/backgrounds/bg-photon-2.jpg", "isDeveloper": false, "avatarName": "leafers-tree", "affiliations": [], "isOrphan": false, "canEvalCsProjects": true, "globalPermissions": [], "profileRoot": "/profile/embalingit/", "email": "", "isPublic": true, "countVideosCompleted": 26, "bio": "Computer Science major.  Currently developing a vector graphic animation studio.", "hasStudents": false, "countBrandNewNotifications": 0, "canCreateOfficialClarifications": false, "isModerator": false, "backgroundName": "photon-2", "canHellban": false, "isPublisher": false, "background": {"translatedDisplayName": "Photon Two", "imagePath": "/images/profile/backgrounds/bg-photon-2.jpg", "displayName": "Photon Two", "name": "photon-2", "thumbSrc": "https://cdn.kastatic.org/images/profile/backgrounds/bg-photon-2-preview.png", "translatedRequirements": ["Earn 100,000 energy points"], "rewardType": "profile_background", "thumbnailSrc": "https://cdn.kastatic.org/images/profile/backgrounds/bg-photon-2.jpg", "imageSrc": "https://cdn.kastatic.org/images/profile/backgrounds/bg-photon-2.jpg", "thumbPath": "/images/profile/backgrounds/bg-photon-2-preview.png", "thumbnailPath": ""}, "isDataCollectible": false, "nickname": "Eric Balingit", "canMessageUsers": false, "isActivityAccessible": false, "publicBadges": [{"absoluteUrl": "https://www.khanacademy.org/badges/great-inspiration", "isRetired": false, "isOwned": false, "translatedSafeExtendedDescription": "Other users created 25 programs based on one of yours", "icons": {"large": "https://cdn.kastatic.org/images/badges/earth/great-inspiration-512x512.png", "small": "https://cdn.kastatic.org/images/badges/earth/great-inspiration-40x40.png", "email": "https://cdn.kastatic.org/images/badges/earth/great-inspiration-70x70.png", "compact": "https://cdn.kastatic.org/images/badges/earth/great-inspiration-60x60.png"}, "badgeCategory": 2, "description": "Great Inspiration", "translatedDescription": "Great Inspiration", "safeExtendedDescription": "Other users created 25 programs based on one of yours", "points": 2500, "relativeUrl": "/badges/great-inspiration", "iconSrc": "https://cdn.kastatic.org/images/badges/earth/great-inspiration-40x40.png", "hideContext": false, "slug": "great-inspiration", "name": "getforkedtwentyfivetimesbadge"}, {"absoluteUrl": "https://www.khanacademy.org/badges/work-horse", "isRetired": false, "isOwned": false, "translatedSafeExtendedDescription": "Achieve mastery in 50 unique skills", "icons": {"large": "https://cdn.kastatic.org/images/badges/earth/work-horse-512x512.png", "small": "https://cdn.kastatic.org/images/badges/earth/work-horse-40x40.png", "email": "https://cdn.kastatic.org/images/badges/earth/work-horse-70x70.png", "compact": "https://cdn.kastatic.org/images/badges/earth/work-horse-60x60.png"}, "badgeCategory": 2, "description": "Work Horse", "translatedDescription": "Work Horse", "safeExtendedDescription": "Achieve mastery in 50 unique skills", "points": 14000, "relativeUrl": "/badges/work-horse", "iconSrc": "https://cdn.kastatic.org/images/badges/earth/work-horse-40x40.png", "hideContext": false, "slug": "work-horse", "name": "workhorsemasterybadge"}, {"absoluteUrl": "https://www.khanacademy.org/badges/hard-at-work", "isRetired": false, "isOwned": false, "translatedSafeExtendedDescription": "Achieve mastery in 25 unique skills", "icons": {"large": "https://cdn.kastatic.org/images/badges/moon/hard-at-work-512x512.png", "small": "https://cdn.kastatic.org/images/badges/moon/hard-at-work-40x40.png", "email": "https://cdn.kastatic.org/images/badges/moon/hard-at-work-70x70.png", "compact": "https://cdn.kastatic.org/images/badges/moon/hard-at-work-60x60.png"}, "badgeCategory": 1, "description": "Hard at Work", "translatedDescription": "Hard at Work", "safeExtendedDescription": "Achieve mastery in 25 unique skills", "points": 6000, "relativeUrl": "/badges/hard-at-work", "iconSrc": "https://cdn.kastatic.org/images/badges/moon/hard-at-work-40x40.png", "hideContext": false, "slug": "hard-at-work", "name": "hardatworkmasterybadge"}, {"absoluteUrl": "https://www.khanacademy.org/badges/guru", "isRetired": false, "isOwned": false, "translatedSafeExtendedDescription": "Post 10 answers that earn 3+ votes", "icons": {"large": "https://cdn.kastatic.org/images/badges/earth/guru-512x512.png", "small": "https://cdn.kastatic.org/images/badges/earth/guru-40x40.png", "email": "https://cdn.kastatic.org/images/badges/earth/guru-70x70.png", "compact": "https://cdn.kastatic.org/images/badges/earth/guru-60x60.png"}, "badgeCategory": 2, "description": "Guru", "translatedDescription": "Guru", "safeExtendedDescription": "Post 10 answers that earn 3+ votes", "points": 0, "relativeUrl": "/badges/guru", "iconSrc": "https://cdn.kastatic.org/images/badges/earth/guru-40x40.png", "hideContext": false, "slug": "guru", "name": "leveloneanswerqualitycountbadge"}, {"absoluteUrl": "https://www.khanacademy.org/badges/magellan", "isRetired": false, "isOwned": false, "translatedSafeExtendedDescription": "Achieve mastery in 100 unique skills", "icons": {"large": "https://cdn.kastatic.org/images/badges/sun/magellan-512x512.png", "small": "https://cdn.kastatic.org/images/badges/sun/magellan-40x40.png", "email": "https://cdn.kastatic.org/images/badges/sun/magellan-70x70.png", "compact": "https://cdn.kastatic.org/images/badges/sun/magellan-60x60.png"}, "badgeCategory": 3, "description": "Magellan", "translatedDescription": "Magellan", "safeExtendedDescription": "Achieve mastery in 100 unique skills", "points": 30000, "relativeUrl": "/badges/magellan", "iconSrc": "https://cdn.kastatic.org/images/badges/sun/magellan-40x40.png", "hideContext": false, "slug": "magellan", "name": "magellanmasterybadge"}], "moderatorLevel": 0, "restrictedDomain": null, "allowedByParentToAddAnyCoach": true, "avatarSrc": "https://cdn.kastatic.org/images/avatars/leafers-tree.png", "isCoachingLoggedInUser": false, "userLocation": {"city": "Gainesville", "country": "US", "googlePlacesId": "1fff9970ee1cd0b5283cac1aab75deadcc39b2eb", "state": "FL", "displayText": "Gainesville, FL, United States", "lastModified": "2015-06-20T21:34:08Z", "postalCode": ""}, "canRecordTutorial": false, "points": 241067, "avatar": {"translatedDisplayName": "Leafers (Tree)", "imagePath": "/images/avatars/leafers-tree.png", "displayName": "Leafers (Tree)", "name": "leafers-tree", "partType": "model", "translatedRequirements": ["Earn 100,000 energy points"], "rewardType": "avatar_reward", "thumbnailSrc": "https://cdn.kastatic.org/images/avatars/leafers-tree.png", "imageSrc": "https://cdn.kastatic.org/images/avatars/leafers-tree.png", "thumbnailPath": ""}, "includesUserDataInfo": true, "kaid": "kaid_1034496681270447732882321"}, "discussion": {"showProjectFeedback": true, "loggedIn": false, "isDeveloper": false, "communityQuestionsTitle": "Computer Science", "showDocumentation": true, "isVideo": false, "translatedCommunityQuestionsTitle": "Computer Science", "focusId": "5104832794984448", "isOwner": false, "restrictPosting": false, "which": "scratchpad-questions", "focusKind": "scratchpad", "communityQuestionsUrl": "/computer-programming/d", "canEdit": false, "canRequestFeedback": false, "showSpinoffs": true}, "upVoted": false, "originScratchpad": {"category": "official", "url": "https://www.khanacademy.org/computer-programming/contest-generative-art/6223097608929280", "imageUrl": "https://www.khanacademy.org/computer-programming/contest-generative-art/6223097608929280/5649050225344512.png", "sendToPeers": false, "translatedDescription": "", "projectEval": null, "slug": "contest-generative-art", "deleted": false, "translatedTitle": "Contest: Generative Art", "id": 6223097608929280, "revision": {"id": 5741031244955648}}, "flaggedByUser": false, "downVoted": false, "userScratchpad": {"kind": "UserScratchpad", "msWatched": 0, "msDuration": null, "isProject": false, "lastMsWatched": 0, "challengeStatus": -1, "scratchpadKey": "ag5zfmtoYW4tYWNhZGVteXIXCxIKU2NyYXRjaHBhZBiAgIiLmNqICQw", "fullyWatched": false, "isComplete": false, "isChallenge": false, "difficulty": -1, "points": 0, "stashedCode": "", "key": "ag5zfmtoYW4tYWNhZGVteXKuAQsSDlVzZXJTY3JhdGNocGFkIpkBYWc1emZtdG9ZVzR0WVdOaFpHVnRlWEpVQ3hJSVZYTmxja1JoZEdFaVJuVnpaWEpmYVdSZmEyVjVYMmgwZEhBNkx5OXBaQzVyYUdGdVlXTmhaR1Z0ZVM1dmNtY3ZOVGN3WXpRME9EVXhOek5sTkRGaU1qa3pZalEzWVdRMk1EaGhNalprTmpjTTo1MTA0ODMyNzk0OTg0NDQ4DA", "userKey": "ag5zfmtoYW4tYWNhZGVteXJUCxIIVXNlckRhdGEiRnVzZXJfaWRfa2V5X2h0dHA6Ly9pZC5raGFuYWNhZGVteS5vcmcvNTcwYzQ0ODUxNzNlNDFiMjkzYjQ3YWQ2MDhhMjZkNjcM", "id": "ag5zfmtoYW4tYWNhZGVteXJUCxIIVXNlckRhdGEiRnVzZXJfaWRfa2V5X2h0dHA6Ly9pZC5raGFuYWNhZGVteS5vcmcvNTcwYzQ0ODUxNzNlNDFiMjkzYjQ3YWQ2MDhhMjZkNjcM:5104832794984448", "viewed": true}}