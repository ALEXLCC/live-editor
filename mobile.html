<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- CSS dependencies -->
    <link rel="stylesheet" href="css/bootstrap/dist/css/bootstrap.css"/>
    <link rel="stylesheet" href="css/jquery-ui/ui-lightness/jquery-ui.css"/>

    <!-- Flash block CSS (for Soundmanager) -->
    <link rel="stylesheet" href="css/ui/flashblock.css"/>

    <!-- Colorpicker/Hotnumber CSS -->
    <link rel="stylesheet" href="css/ui/colorpicker.css"/>
    <link rel="stylesheet" href="css/ui/hotnumber.css"/>

    <!-- Core CSS -->
    <link rel="stylesheet" href="css/ui/style.css"/>

    <!-- Core dependencies -->
    <script src="external/es5-shim/es5-shim.js"></script>
    <script src="external/jquery/dist/jquery.js"></script>
    <script src="external/jqueryui/jquery-ui.js"></script>
    <script src="external/handlebars/handlebars.js"></script>
    <script src="external/underscore/underscore.js"></script>
    <script src="external/backbone/backbone.js"></script>

    <!-- Code editor -->
    <script src="external/ace-builds/src-noconflict/ace.js"></script>
    <script src="external/ace-builds/src-noconflict/mode-javascript.js"></script>
    <script src="external/ace-builds/src-noconflict/ext-searchbox.js"></script>

    <script src="external/colorpicker/colorpicker.js"></script>

    <!-- Blockly editor -->
    <script src="external/blockly/blockly_compressed.js"></script>
    <script src="external/blockly/javascript_compressed.js"></script>
    <script src="external/blockly/blocks_compressed.js"></script>
    <script src="external/blockly/msg/js/en.js"></script>

    <!-- JS-to-Blockly -->
    <script src="external/structuredjs/external/esprima.js"></script>
    <script src="external/js-to-blockly/sax.js"></script>
    <script src="external/js-to-blockly/xml-writer.js"></script>
    <script src="external/js-to-blockly/xml-mapping.js"></script>
    <script src="external/js-to-blockly/pattern-match.js"></script>
    <script src="external/js-to-blockly/js-to-blockly.js"></script>

    <script src="external/js-to-blockly/jslang/index.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_etc.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_try_catch.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_call.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_member.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_var.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_object.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_function.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_return.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_assignment.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_if.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_unary.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_binary.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_this.js"></script>
    <script src="external/js-to-blockly/jslang/jslang_logical.js"></script>

    <script src="js/ui/blockly-processing-blocks.js"></script>

    <!-- Audio playback and recording -->
    <script src="external/SoundManager2/script/soundmanager2.js"></script>
    <script src="external/multirecorderjs/multirecorder.js"></script>
    <script src="external/transloaditxhr/transloadit_xhr.js"></script>

    <!-- Internal jQuery plugins -->
    <script src="js/ui/jquery.button.js"></script>
    <script src="js/ui/jquery.hotnumber.js"></script>
    <script src="js/ui/hotnumber.js"></script>

    <!-- Templates -->
    <script src="tmpl/live-editor.handlebars.js"></script>
    <script src="tmpl/imagepicker.handlebars.js"></script>
    <script src="tmpl/dev-record.handlebars.js"></script>

    <!-- Shared logic -->
    <script src="js/shared/i18n.js"></script>
    <script src="js/shared/images.js"></script>
    <script src="js/shared/record.js"></script>
    <script src="js/shared/config.js"></script>

    <!-- Core logic -->
    <script src="js/ui/canvas.js"></script>
    <script src="js/ui/editor.js"></script>
    <script src="js/ui/record.js"></script>
    <script src="js/live-editor.js"></script>

    <script>
    $(function() {
        var options = {
            el: $("#sample-live-editor"),
            code: window.DEFAULT_CODE || "",
            width: 400,
            height: 400,
            editorHeight: "100%",
            autoFocus: true,
            execDir: "./js/exec/",
            externalsDir: "./external/",
            imagesDir: "./images/"
        };

        window.liveEditor = new LiveEditor(options);

        $("<button>")
            .addClass("btn btn-success pull-left")
            .text(" Save")
            .prepend("<span class='glyphicon glyphicon-save'></span>")
            .on("click", function() {
                var iframe = document.createElement("IFRAME");
                iframe.setAttribute("src", "ka-cs://save-code?code=" +
                    encodeURIComponent(liveEditor.editor.text()));
                document.documentElement.appendChild(iframe);
                iframe.parentNode.removeChild(iframe);
                iframe = null;
            })
            .appendTo(".scratchpad-wrap .scratchpad-toolbar");

        $("#restart-code").addClass("btn btn-warning");
    });
    </script>
</head>
<body>
    <div id="sample-live-editor"></a>
</body>
</html>